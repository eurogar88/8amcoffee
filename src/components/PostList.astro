---
import posts from '../data/posts-public.json';

const { date: currentDate } = Astro.props;
const filteredPosts = posts.filter(p => p.date === currentDate);
const showBanner = filteredPosts.length >= 3;

// Partimos los posts
const firstTwo = filteredPosts.slice(0, 2);
const remaining = filteredPosts.slice(2);
---

<section class="post-list">
  {firstTwo.map(post => (
    <article class="post">
      <small>{post.date}</small>
      <h2>{post.title}</h2>
      <p>{post.summary}</p>
      {post.url && (
        <a href={post.url} class="read-more" target="_blank" rel="noopener noreferrer">
          Read more →
        </a>
      )}
    </article>
  ))}

  {remaining.map(post => (
    <article class="post">
      <small>{post.date}</small>
      <h2>{post.title}</h2>
      <p>{post.summary}</p>
      {post.url && (
        <a href={post.url} class="read-more" target="_blank" rel="noopener noreferrer">
          Read more →
        </a>
      )}
    </article>
  ))}
</section>
